{"version":3,"sources":["webpack:///./src/components/CommunicationForm/index.js","webpack:///./src/pages/c/communication.js","webpack:///./node_modules/core-js/modules/es6.function.name.js"],"names":["CommunicationForm","props","_this","_React$Component","call","this","componentDidMount","setState","Object","assign","state","status","statuses","LOADING","handleChange","event","_Object$assign","communicationPreferences","target","name","checked","handleSubmit","SAVING","preventDefault","apiClient","patchMe","then","SAVED","catch","error","console","message","ERROR","componentWillReceiveProps","nextProps","nextContext","auth","user","READY","render","react_default","a","createElement","className","onSubmit","type","savedConferences","onChange","id","htmlFor","gatsby_browser_entry","to","savedSearches","weeklySummary","value","ApiClient","React","Component","Communication","isAuthenticated","window","location","href","_this$props","Layout","Meta","site","siteMetadata","title","Fragment","components_CommunicationForm","withAuthentication","dP","__webpack_require__","f","FProto","Function","prototype","nameRE","configurable","get","match","e"],"mappings":"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","file":"component---src-pages-c-communication-js-fb1e0a202e7523e86272.js","sourcesContent":["import React from 'react'\nimport './style.scss'\nimport ApiClient from 'utilities/api-client'\nimport { statuses } from 'utilities/statuses'\nimport { Link } from 'gatsby'\n\nclass CommunicationForm extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      status: statuses.READY,\n      communicationPreferences: {\n        savedConferences: true,\n        savedSearches: true,\n        weeklySummary: true,\n      },\n    }\n\n    this.apiClient = new ApiClient()\n  }\n\n  componentDidMount = () => {\n    this.setState({ ...this.state, status: statuses.LOADING })\n  }\n\n  handleChange = event => {\n    this.setState({\n      ...this.state,\n      communicationPreferences: {\n        ...this.state.communicationPreferences,\n        [event.target.name]: event.target.checked,\n      },\n    })\n  }\n\n  handleSubmit = event => {\n    this.setState({ ...this.state, status: statuses.SAVING })\n    event.preventDefault()\n\n    this.apiClient\n      .patchMe({\n        communicationPreferences: this.state.communicationPreferences,\n      })\n      .then(() => {\n        this.setState({\n          ...this.state,\n          status: statuses.SAVED,\n        })\n      })\n      .catch(error => {\n        console.error(error.message)\n        this.setState({ ...this.state, status: statuses.ERROR })\n      })\n  }\n\n  componentWillReceiveProps = (nextProps, nextContext) => {\n    if (nextProps && nextProps.auth && nextProps.auth.user) {\n      this.setState({\n        ...this.state,\n        communicationPreferences: {\n          ...this.state.communicationPreferences,\n          ...nextProps.auth.user.communicationPreferences,\n        },\n        status: statuses.READY,\n      })\n    }\n  }\n\n  render = () => (\n    <form className=\"row account-form\" onSubmit={this.handleSubmit}>\n      <div className=\"col-12 mb-4\">\n        <p>Select the notifications you would like to receive.</p>\n\n        <h5 className=\"mt-3\">Saved CFPs</h5>\n        <div className=\"form-check\">\n          <input\n            className=\"form-check-input\"\n            name=\"savedConferences\"\n            type=\"checkbox\"\n            checked={this.state.communicationPreferences.savedConferences}\n            onChange={this.handleChange}\n            id=\"savedConferences\"\n          />\n          <label className=\"form-check-label\" htmlFor=\"savedConferences\">\n            Receive email notifications 21, 7, and 2 days before any of your{' '}\n            <Link to=\"/c/saved/\">\n              <i className=\"fa fa-star\" /> Saved CFPs\n            </Link>{' '}\n            close.\n          </label>\n        </div>\n\n        <h5 className=\"mt-3\">Saved Searches</h5>\n        <div className=\"form-check\">\n          <input\n            className=\"form-check-input\"\n            name=\"savedSearches\"\n            type=\"checkbox\"\n            checked={this.state.communicationPreferences.savedSearches}\n            onChange={this.handleChange}\n            id=\"savedSearches\"\n          />\n          <label className=\"form-check-label\" htmlFor=\"savedSearches\">\n            Receive daily email notifications when new CFPs match any of your{' '}\n            <Link to=\"/c/searches/\">\n              <i className=\"fa fa-search\" /> Saved Searches\n            </Link>\n            .\n          </label>\n        </div>\n\n        <h5 className=\"mt-3\">Weekly Summary</h5>\n        <div className=\"form-check\">\n          <input\n            className=\"form-check-input\"\n            name=\"weeklySummary\"\n            type=\"checkbox\"\n            checked={this.state.communicationPreferences.weeklySummary}\n            onChange={this.handleChange}\n            id=\"weeklySummary\"\n          />\n          <label className=\"form-check-label\" htmlFor=\"weeklySummary\">\n            Receive a weekly email summary of your CFP Land Pro activity.\n          </label>\n        </div>\n      </div>\n      <div className=\"col-12\">\n        <input\n          type=\"submit\"\n          value=\"Save\"\n          className=\"btn btn-success btn-lg btn-block mb-3\"\n        />\n      </div>\n      <div className=\"col-12\">\n        {this.state.status === statuses.ERROR ? (\n          <div className=\"alert alert-danger\">\n            <strong>Whoops! Something went wrong.</strong> Check the console to\n            learn more or contact support for help.\n          </div>\n        ) : (\n          ''\n        )}\n        {this.state.status === statuses.SAVED ? (\n          <div className=\"alert alert-success\">\n            <strong>Communication preferences saved!</strong> You can now carry\n            on with your day.\n          </div>\n        ) : (\n          ''\n        )}\n      </div>\n    </form>\n  )\n}\n\nexport default CommunicationForm\n","import React from 'react'\nimport { siteMetadata } from '../../../gatsby-config'\nimport Layout from 'components/Layout'\nimport Meta from 'components/Meta'\nimport CommunicationForm from '../../components/CommunicationForm'\nimport { withAuthentication } from '../../context/withAuthentication'\n\nclass Communication extends React.Component {\n  componentWillReceiveProps = (nextProps, nextContext) => {\n    if (nextProps && nextProps.auth && !nextProps.auth.isAuthenticated) {\n      window.location.href = '/'\n    }\n  }\n\n  render = () => {\n    const { location, auth } = this.props\n    return (\n      <Layout location={location} auth={auth}>\n        <Meta site={siteMetadata} title=\"Your Account\" />\n        <div className=\"container mt-3\">\n          <div className=\"account-page\">\n            {auth.isAuthenticated ? (\n              <React.Fragment>\n                <h1>Communication Preferences</h1>\n                <CommunicationForm auth={auth} />\n              </React.Fragment>\n            ) : (\n              ''\n            )}\n          </div>\n        </div>\n      </Layout>\n    )\n  }\n}\n\nexport default withAuthentication(Communication)\n","var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n"],"sourceRoot":""}